{/* @license CC0-1.0 */}

import { Meta } from "@storybook/addon-docs/blocks";
import * as FormStories from "./FormFlow.stories.tsx";

<Meta of={FormStories} />

# Form Flow

These examples describe a user-friendly form flow.
Form pages have a minimal header and footer in order to remove distractions.
Start with asking [one thing per page](https://www.gov.uk/service-manual/design/form-structure#start-with-one-thing-per-page).
This can be a single question, or a group of related questions.

## Landing Page

Most form flows start with a landing page that explains the process and provides a call to action to start the form flow.

## First Form Page

The first form page is the same as other form pages, with one exception: it does not have a back link.
A back link helps users feel secure that their progress is preserved while moving between form pages.
Since the first form page has no progress to save yet, a back link is unnecessary there.
Additionally, users might reach the first form page from a source other than the landing page, which could make a back link confusing.

## With One Question

On a form page with one question, the label or legend for the question is the level 1 heading of the page.
For labels, wrap the `h1` around it.
For legends, wrap it around the `h1`.

For more information, see [Making labels and legends headings](https://design-system.service.gov.uk/get-started/labels-legends-headings/).

## With Multiple Questions

When a form page has multiple questions, place an `h1` outside the `form`-tag,
which describes the group of questions.

For more information, see [Question pages - Asking complex questions without using hint text](https://design-system.service.gov.uk/patterns/question-pages/#asking-complex-questions-without-using-hint-text)

## With Validation Error

If the user’s answers fail validation:

- show them the page again, with the form fields as the user filled them in
- show an [Invalid Form Alert](/docs/components-forms-invalid-form-alert--docs) at the top of the `main` container, and move keyboard focus to it
- add ‘(X invoerfouten) ’ to the beginning of the page `<title>` so that screen readers announce it immediately (Invalid Form Alert does this automatically)
- show [Error message](/docs/components-forms-error-message--docs) components next to fields with errors

See the [Field](/docs/components-forms-field--docs#with-validation) and [Field Set](/docs/components-forms-field-set--docs#with-validation) docs on how to mark them as invalid.

Validate the user’s answers when they click on the submit button.
Generally speaking, avoid validating the information in a field before the user has finished entering it or when they move away from the field.

For more information:

- [Recover from validation errors](https://design-system.service.gov.uk/patterns/validation/)
- [Error summary](https://design-system.service.gov.uk/components/error-summary/)

## References

- [Gov.uk on question pages](https://design-system.service.gov.uk/patterns/question-pages/)
- [NL Design System on forms](https://nldesignsystem.nl/richtlijnen/formulieren/)
