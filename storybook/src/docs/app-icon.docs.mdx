import { Meta } from "@storybook/blocks";
import { AppleTouchIcon, Favicon, SvgIcon, WebAppIcons } from "./components/AppIcons";

<Meta title="Docs/Assets/Favicon & App Icons" />

# Favicon & App Icons

Represent the website in bookmarks, on home screens, in syndication and other tools.

Hereâ€™s how to display a website icon (a favicon) in the web browser or publish a web app with the proper app names and icons.
This set covers all combinations of common operating systems (Android, iOS, macOS, and Windows) and browsers (Chrome, Safari, Edge, and Firefox).

## Overview & examples

### Favicon

<Favicon />

We include a classic icon file with this exact name as a baseline for some browsers and RSS readers.

```html
<link rel="icon" href="favicon.ico" sizes="16x16 32x32 64x64" />
```

### SVG Icon

Roughly 75% of browsers support SVG favicons, which are more efficient and versatile.

<SvgIcon />

```html
<link rel="icon" type="image/svg+xml" href="icon.svg" />
```

### Apple Touch Icon

<AppleTouchIcon />

An iPhone or iPad uses this image when adding the webpage as a shortcut to your home screen.

```html
<link rel="apple-touch-icon" href="apple-touch-icon.png" />
```

### Web App Icons

<WebAppIcons />

Include `icons` object in `*.webmanifest` (see [Usage](#usage)):

```json
{
  // ...
  "icons": [
    { "src": "/icon-192.png", "type": "image/png", "sizes": "192x192" },
    { "src": "/icon-512.png", "type": "image/png", "sizes": "512x512" }
  ]
  // ...
}
```

Link the Web Manifest in the `<head>`:

```html
<link rel="manifest" href="app.webmanifest" />
```

> Note: only include a Web Manifest if you want the website to be installable as a Progressive Web App (PWA).
> Browsers [may prompt the user to install the app](https://web.dev/learn/pwa/installation-prompt) on their device if a manifest is found.

## Usage

First, install these assets as they come with the [Amsterdam Design System Assets](https://www.npmjs.com/package/@amsterdam/design-system-assets):

```sh
npm i @amsterdam/design-system-assets
```

Then you can either use the post-install script (**Option A**) or manually copy and link the assets (**Option B**).

### (A) Link assets with a script

Use the [`postinstall.sh`](https://github.com/Amsterdam/design-system/tree/develop/proprietary/assets/postinstall.sh) script from the root of your new **Vite React**, **Next.js**, legacy React or generic HTML project to automatically link the assets.

If you only want the icons, but not the Web Manifest and PWA support:

```sh
# Make sure you are in the root directory of your project!
sh node_modules/@amsterdam/design-system-assets/postinstall.sh
```

If you want to generate a Web Manifest for a PWA as well, provide a full app name and a short app name:

```sh
# Make sure you are in the root directory of your project!
# The full app name may not be longer than 30 characters and the short name no longer than 12 characters.
sh node_modules/@amsterdam/design-system-assets/postinstall.sh "Full App Name" "Short Name"
```

Users may then be prompted to install the app as a PWA.

> If an `index.html` is found in the root or in a `public` directory the script will also insert the links in the HTML's `<head>` tag.
> This will not be the case for Next.js applications.

> This script can work for any project that has an `index.html` file in the root or `public` directory.

### (B) Link manually

You can manually [symlink (symbolic link)](https://en.wikipedia.org/wiki/Symbolic_link#POSIX_and_Unix-like_operating_systems) and copy the files to the root or a `public` folder next to where the `index.html` is located in your project.
An advantage of symlinking is that it tracks changes to the assets when there are package updates.

Symlinking [the entire favicon directory](https://github.com/Amsterdam/design-system/tree/develop/proprietary/assets/favicon) and copying the [Web Manifest](https://github.com/Amsterdam/design-system/tree/develop/proprietary/assets/app.manifest) can be done as follows:

```sh
# `cd` to the directory where you want to make the symlinks.
ln -s node_modules/@amsterdam/design-system-assets/favicon appicons
# Copy the Web Manifest if you want users to be able to and be prompted to install the app as a PWA.
cp node_modules/@amsterdam/design-system-assets/manifest/app.webmanifest app.webmanifest
```

> Note: for the symlink, the last argument in the above command cannot be a path, but can only be the file or directory name.
> I.e. you need to be in the directory where you want to make the symbolic link.

> Note that undoing a symlink can be done by simply removing the created file or directory link:
>
> ```sh
> rm -r appicons app.webmanifest
> ```

> Note: not all servers recognize the `.webmanifest` extension.
> See [Using a link element to link to a manifest on W3.org](https://www.w3.org/TR/appmanifest/#using-a-link-element-to-link-to-a-manifest) for more information.

Make sure that the Web Manifest, stating the app's name and referencing the PNG icons, is available in the same location.
Edit the `app.webmanifest` file to include the app's name and the icons you want to use.
For example:

```json
{
  "name": "A maximum of thirty characters",
  "short_name": "Max 12 chars",
  "icons": [
    { "src": "/appicons/icon-192.png", "type": "image/png", "sizes": "192x192" },
    { "src": "/appicons/icon-512.png", "type": "image/png", "sizes": "512x512" }
  ]
}
```

Then link all these assets by placing the following tags in the `<head>`:

```html
<head>
  ...
  <link rel="icon" href="appicons/favicon.ico" size="16x16 32x32 64x64" />
  <link rel="icon" href="appicons/icon.svg" type="image/svg+xml" />
  <link rel="apple-touch-icon" href="appicons/apple-touch-icon.png" />
  <link rel="manifest" href="app.webmanifest" />
  ...
</head>
```

### Submit the changes

The symlinks and copied and edited files can be committed to the repository.

## Further Reading

- [_How to Favicon in 2024: Six files that fit most needs_ by Andrey Sitnik](https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs)
- [_Web App Manifest_ on web.dev](https://web.dev/learn/pwa/web-app-manifest)
